<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2023-12-23 Sat 10:27 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>SR: Diagrams</title>
<meta name="author" content="bill" />
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="css/stylesheet.css" />
</head>
<body>
<div id="preamble" class="status">
<a href="https://stormrider.io">Home</a> ~ <a href="https://stormrider.io/about-me.html">About</a> ~ <a href="https://stormrider.io/arcana.html">Arcana</a> ~ <a href="https://stormrider.io/open-source.html">Open Source</a>
</div>
<div id="content" class="content">
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org2c18105">MAAS image deployment flowchart</a></li>
<li><a href="#org06289d1">MAAS image anatomy</a></li>
<li><a href="#org5a897bb">Linux kernel block diagrams</a></li>
</ul>
</div>
</div>

<div id="outline-container-org2c18105" class="outline-2">
<h2 id="org2c18105">MAAS image deployment flowchart</h2>
<div class="outline-text-2" id="text-org2c18105">
<p>
Here's a flowchart of how MAAS deploys an image:
</p>


<div id="org09ce1c6" class="figure">
<p><img src="images/machine-booting.jpg" alt="machine-booting.jpg" />
</p>
</div>
</div>
</div>

<div id="outline-container-org06289d1" class="outline-2">
<h2 id="org06289d1">MAAS image anatomy</h2>
<div class="outline-text-2" id="text-org06289d1">
<p>
Standard MAAS images are downloaded from <a href="https://images.maas.io">images.maas.io</a> into the MAAS region controller's cache, the layout of which is shown below.  To see what goes into a MAAS image, we can snapshot <a href="https://images.maas.io">images.maas.io</a> like this:
</p>

<pre class="example" id="orgce96b15">
Index of /
[ICO]	Name            Last modified	       Size
[DIR]	ephemeral-v2/	2016-05-17 18:17 	-
[DIR]	ephemeral-v3/	2020-10-14 14:35 	-
[DIR]	ephemeral/	2013-09-13 18:23 	-
[DIR]	query/	2017-05-02 18:38 	-
[DIR]	streams/	2013-08-22 05:04 	-
Apache/2.4.29 (Ubuntu) Server at images.maas.io Port 443
</pre>

<p>
We'll ignore everything but the <code>ephemeral-v3</code> directory for this discussion; it contains the following:
</p>

<pre class="example" id="org4572def">
Index of /ephemeral-v3
[ICO]	     Name	       Last modified	 Size
[PARENTDIR]  Parent Directory	 	           -
[DIR]	     candidate/	       2022-05-15 21:40    -
[DIR]	     daily/	       2020-06-17 13:05    -
[DIR]	     stable/	       2022-08-11 20:04    -
Apache/2.4.29 (Ubuntu) Server at images.maas.io Port 443
</pre>

<p>
As of this writing, the <a href="https://maas.io/docs">MAAS documentation</a> tell us that the <a href="https://maas.io/docs/how-to-import-images#heading--candidate-stream">candidate stream</a> "contains images and bootloaders which have not been explicitly tested with MAAS."  These images may be more up-to-date than others in the repository.
</p>

<p>
Similarly, the <a href="https://maas.io/docs/how-to-import-images#heading--stable-stream">stable stream</a> "contains images and bootloaders which have been tested with the latest version of MAAS", so these images are more likely to be reliable and error-free than the candidate stream.  This stream is intended for production use.
</p>

<p>
The <a href="https://maas.io/docs/how-to-import-images#heading--daily-stream">daily stream</a> has been retired, even though it retains a subdirectory.  Any attempts to pull from the daily stream are automatically redirected to the stable stream.
</p>
</div>

<div id="outline-container-org74bb2b2" class="outline-3">
<h3 id="org74bb2b2">What's in a stream?</h3>
<div class="outline-text-3" id="text-org74bb2b2">
<p>
Delving into the stable stream gives us this listing:
</p>

<pre class="example" id="org968fa22">
Index of /ephemeral-v3/stable
[ICO]	 Name	           Last modified     Size
[PARENTDIR]	 Parent Directory	 	      -
[DIR]	 bionic/	   2020-10-07 21:13   -
[DIR]	 bootloaders/	   2020-10-07 21:13   -
[DIR]	 centos/	   2020-11-19 19:05   -
[DIR]	 focal/	           2020-10-07 21:13   -
[DIR]	 groovy/	   2020-10-07 21:13   -
[DIR]	 hirsute/	   2020-11-03 23:03   -
[DIR]	 impish/	   2021-05-17 21:04   -
[DIR]	 jammy/	           2022-04-20 16:06   -
[DIR]	 kinetic/	   2022-08-11 20:04   -
[DIR]	 precise/	   2020-10-07 21:13   -
[DIR]	 streams/	   2020-10-22 15:49   -
[DIR]	 trusty/	   2020-10-07 21:13   -
[DIR]	 xenial/	   2020-10-07 21:13   -
Apache/2.4.29 (Ubuntu) Server at images.maas.io Port 443
</pre>

<p>
You can see that there are stable Ubuntu images for a number of different Unbuntu releases, dating back several years.  <i>Not all of these images will work on all versions of MAAS, BTW.</i>  Just looking at the latest stable release (<code>jammy</code>), we can get a picture of what's included with the image stream:
</p>

<pre class="example" id="org5c8d139">
Index of /ephemeral-v3/stable/jammy
[ICO]	 Name	           Last modified     Size
[PARENTDIR]	 Parent Directory	 	      -
[DIR]	 amd64/	           2022-08-11 20:05   -
[DIR]	 arm64/	           2022-08-11 20:05   -
[DIR]	 armhf/	           2022-08-11 20:05   -
[DIR]	 ppc64el/	   2022-08-11 20:05   -
[DIR]	 s390x/	           2022-08-11 20:05   -
Apache/2.4.29 (Ubuntu) Server at images.maas.io Port 443
</pre>

<p>
The stream is sorted by architecture, so let's examine the <code>amd64</code> architecture, one of the most common instances used for MAAS:
</p>

<pre class="example" id="org100b53e">
Index of /ephemeral-v3/stable/jammy/amd64
[ICO]	 Name	           Last modified     Size
[PARENTDIR]	 Parent Directory	 	      -
[DIR]	 20220616/	   2022-06-24 15:04   -
[DIR]	 20220712.1/	   2022-07-14 21:05   -
[DIR]	 20220718/	   2022-07-21 19:01   -
[DIR]	 20220808/	   2022-08-11 20:03   -
Apache/2.4.29 (Ubuntu) Server at images.maas.io Port 443
</pre>

<p>
Here, we see that there are several different versions, roughly one per month.  If we choose the latest (<code>20220808</code>), we begin to see the anatomy of an image:
</p>

<pre class="example" id="org27f78e4">
Index of /ephemeral-v3/stable/jammy/amd64/20220808
[ICO]	 Name	           Last modified     Size
[PARENTDIR]	 Parent Directory	 	      -
[DIR]	 ga-22.04/	   2022-08-11 20:04   -
[ ]	         squashfs	   2022-08-08 14:26  404M
[ ]	         squashfs.manifest 2022-08-08 14:26   16K
Apache/2.4.29 (Ubuntu) Server at images.maas.io Port 443
</pre>

<p>
So we've picked up one component of the image, the <a href="https://en.wikipedia.org/wiki/SquashFS">SquashFS</a>, a compressed, read-only filesystem that can be loaded into RAMdisk for the ephemeral image to use (e.g., when commissioning a MAAS machine).  You can get an idea of what's in this SquashFS by looking at the <code>squashfs.manifest</code>. The first part of this particular manifest file looks like this:
</p>

<pre class="example" id="org379748c">
adduser	3.118ubuntu5
apparmor	3.0.4-2ubuntu2.1
apport	2.20.11-0ubuntu82.1
apport-symptoms	0.24
apt	2.4.5
apt-utils	2.4.5
base-files	12ubuntu4.1
base-passwd	3.5.52build1
bash	5.1-6ubuntu1
bash-completion	1:2.11-5ubuntu1
bc	1.07.1-3build1
bcache-tools	1.0.8-4ubuntu3
bind9-dnsutils	1:9.18.1-1ubuntu1.1
bind9-host	1:9.18.1-1ubuntu1.1
</pre>

<p>
It's obvious that this is (mostly) just a list of packages to be included with the running system.  If you want to peruse the whole thing, you can go to <a href="https://images.maas.io">images.maas.io</a> and download the manifest file, which is plain text.
</p>

<p>
To round out this part of the image, we can double-jump straight to <code>ga-22.04/generic</code> to find:
</p>

<pre class="example" id="orgeb0605d">
[ICO]	 Name	           Last modified     Size
[PARENTDIR]	 Parent Directory	 	      -
[ ]	         boot-initrd	   2022-08-08 14:26  106M
[ ]	         boot-kernel	   2022-08-08 14:26   11M
</pre>

<p>
Here we see an <a href="https://en.wikipedia.org/wiki/Initial_ramdisk">initial ramdisk</a> (<code>boot-initrd</code>), which loads a temporary, in-memory <code>root</code> filesystem for use by a booting ephemeral kernel on startup.  You'll also notice that the ephemeral kernel is located in this directory, as well.
</p>
</div>

<div id="outline-container-orgaaa61d7" class="outline-5">
<h5 id="orgaaa61d7">What else do we need?</h5>
<div class="outline-text-5" id="text-orgaaa61d7">
<p>
This <i>almost</i> completes the picture of the MAAS image.  We have a kernel, a temporary root filesystem, and an extended filesystem in compressed form.  What's missing?  Well, the bootloader, which is back at the top level of our streams directory:
</p>

<pre class="example" id="orgff0c6f2">
Index of /ephemeral-v3/stable
[ICO]	 Name	           Last modified     Size
[PARENTDIR]	 Parent Directory	 	      -
[DIR]	 bionic/	   2020-10-07 21:13   -
[DIR]	 bootloaders/	   2020-10-07 21:13   -
[DIR]	 centos/	   2020-11-19 19:05   -
[DIR]	 focal/	           2020-10-07 21:13   -
[DIR]	 groovy/	   2020-10-07 21:13   -
[DIR]	 hirsute/	   2020-11-03 23:03   -
[DIR]	 impish/	   2021-05-17 21:04   -
[DIR]	 jammy/	           2022-04-20 16:06   -
[DIR]	 kinetic/	   2022-08-11 20:04   -
[DIR]	 precise/	   2020-10-07 21:13   -
[DIR]	 streams/	   2020-10-22 15:49   -
[DIR]	 trusty/	   2020-10-07 21:13   -
[DIR]	 xenial/	   2020-10-07 21:13   -
Apache/2.4.29 (Ubuntu) Server at images.maas.io Port 443
</pre>

<p>
Without walking all the directories under bootloaders, we can summarize the contents like this:
</p>

<ul class="org-ul">
<li>the <code>open-firmware</code> directory contains some number of compressed <a href="https://en.wikipedia.org/wiki/GNU_GRUB"><code>grub</code></a> archives for various architectures, updated with a new version every time a new MAAS image set is pushed.</li>

<li>the <code>pxe</code> directory contains compressed <a href="https://en.wikipedia.org/wiki/SYSLINUX"><code>syslinux</code></a> archives, sorted by architecture and release date.</li>

<li>the <code>uefi</code> directory contains compressed <code>grub</code> and <a href="https://wiki.debian.org/SecureBoot"><code>shim</code></a> (secure boot) archives, again sorted by architecture and release date.</li>
</ul>

<p>
This set of files covers all the possible boot configurations that this ephemeral image can support.
</p>
</div>
</div>
</div>
<div id="outline-container-org859e205" class="outline-3">
<h3 id="org859e205">What an image contains</h3>
<div class="outline-text-3" id="text-org859e205">
<p>
A MAAS simplestreams image, then, contains the following four things:
</p>

<ol class="org-ol">
<li>A kernel.</li>
<li>A bootloader.</li>
<li>An initial RAMdisk (temporary root filesystem).</li>
<li>A SquashFS compressed ("complete") filesystem.</li>
</ol>

<p>
As you can see from the foregoing discussion, there are many different architectures and update versions for each of these.
</p>
</div>
</div>

<div id="outline-container-orga74621c" class="outline-3">
<h3 id="orga74621c">How the rack controller lays it down on disk</h3>
<div class="outline-text-3" id="text-orga74621c">
<p>
When you downloaded MAAS images from the simplestreams, you're actually just downloading them to the rack controller. In fact, until they <i>are</i> downloaded to the rack controller, they can't be deployed.
</p>
</div>

<div id="outline-container-org268fecc" class="outline-4">
<h4 id="org268fecc">Image directory</h4>
<div class="outline-text-4" id="text-org268fecc">
<p>
For the MAAS snap, the rack controller stores its images in <code>/var/snap/maas/common/maas/boot-resources/current</code>.  A typical image layout might look like this:
</p>

<pre class="example" id="orgcea6a14">
 4 drwxr-xr-x 5 root root  4096 Aug 11 15:38 bootloader
 4 drwxr-xr-x 3 root root  4096 Aug 11 15:38 centos
 4 drwxr-xr-x 3 root root  4096 Aug 11 15:38 custom
 4 drwxr-xr-x 2 root root  4096 Aug 11 15:39 grub
 4 -rw-r--r-- 1 root root   238 Aug 11 15:39 ipxe.cfg
92 -rw-r--r-- 1 root root 92070 Aug 16 15:36 maas.meta
 4 drwxr-xr-x 3 root root  4096 Aug 11 15:38 rhel
 4 drwxr-xr-x 3 root root  4096 Aug 11 15:38 ubuntu
</pre>
</div>
</div>

<div id="outline-container-org961d33c" class="outline-4">
<h4 id="org961d33c">The bootloader</h4>
<div class="outline-text-4" id="text-org961d33c">
<p>
The typical <code>bootloader</code> directory might look like this:
</p>

<pre class="example" id="orgc41b405">
total 20
4 drwxr-xr-x 5 root root 4096 Aug 11 15:38 .
4 drwxr-xr-x 8 root root 4096 Aug 11 15:39 ..
4 drwxr-xr-x 3 root root 4096 Aug 11 15:38 open-firmware
4 drwxr-xr-x 3 root root 4096 Aug 11 15:38 pxe
4 drwxr-xr-x 4 root root 4096 Aug 11 15:38 uefi
</pre>
</div>

<div id="outline-container-org5a00e41" class="outline-5">
<h5 id="org5a00e41">open-firmware/ppc64el/bootppc64.bin</h5>
<div class="outline-text-5" id="text-org5a00e41">
<p>
This example directory contains the <code>bootppc64.bin</code> open firmware bootloader for <a href="https://en.wikipedia.org/wiki/Ppc64">PowerPC</a> processors.
</p>
</div>
</div>

<div id="outline-container-orgd9cee2f" class="outline-5">
<h5 id="orgd9cee2f">pxe/i386</h5>
<div class="outline-text-5" id="text-orgd9cee2f">
<p>
This example directory contains various bootloaders and associated <code>syslinux</code> programs for the SYSLINUX PXE bootloader.  The bootloaders typically found in this directory include <code>lpxelinux.0</code> and <code>pxelinux.0</code>.
</p>
</div>
</div>

<div id="outline-container-org3173cca" class="outline-5">
<h5 id="org3173cca">uefi</h5>
<div class="outline-text-5" id="text-org3173cca">
<p>
The files in this example directory would typically include various extensible firmware interface (EFI) bootloaders for booting systems under various conditions.  Typical files might include:
</p>

<ul class="org-ul">
<li>arm64/bootaa64.efi</li>
<li>amd64/bootx64.efi</li>
<li>arm64/grubaa64.efi</li>
<li>amd64/grubx64.efi</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgbe9fc61" class="outline-4">
<h4 id="orgbe9fc61">centos</h4>
<div class="outline-text-4" id="text-orgbe9fc61">
<p>
This directory typically contains various CentOS images supported by MAAS.  These images are sorted by directory (e.g., <code>centos/amd64/generic/8/stable</code>), since they are typically all named <code>root-tgz</code>.
</p>
</div>
</div>

<div id="outline-container-org3f52e6b" class="outline-4">
<h4 id="org3f52e6b">custom</h4>
</div>
<div id="outline-container-org6bdabfa" class="outline-4">
<h4 id="org6bdabfa">grub</h4>
</div>
<div id="outline-container-org0cee026" class="outline-4">
<h4 id="org0cee026">ipxe.cfg</h4>
</div>
<div id="outline-container-orgf751285" class="outline-4">
<h4 id="orgf751285">maas.meta</h4>
</div>
<div id="outline-container-org247e8a9" class="outline-4">
<h4 id="org247e8a9">rhel</h4>
</div>
<div id="outline-container-orgc7ca0ff" class="outline-4">
<h4 id="orgc7ca0ff">ubuntu</h4>
</div>
</div>

<div id="outline-container-org4988b4d" class="outline-3">
<h3 id="org4988b4d">Links to commonly used files</h3>
<div class="outline-text-3" id="text-org4988b4d">
<p>
For convenience, a number of symbolic links to common files are kept in the <code>current</code> directory:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">link</th>
<th scope="col" class="org-left">points to</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">bootaa64.efi</td>
<td class="org-left">bootloader/uefi/arm64/bootaa64.efi</td>
</tr>

<tr>
<td class="org-left">bootppc64.bin</td>
<td class="org-left">bootloader/open-firmware/ppc64el/bootppc64.bin</td>
</tr>

<tr>
<td class="org-left">bootx64.efi</td>
<td class="org-left">bootloader/uefi/amd64/bootx64.efi</td>
</tr>

<tr>
<td class="org-left">chain.c32</td>
<td class="org-left">bootloader/pxe/i386/chain.c32</td>
</tr>

<tr>
<td class="org-left">grubaa64.efi</td>
<td class="org-left">bootloader/uefi/arm64/grubaa64.efi</td>
</tr>

<tr>
<td class="org-left">grubx64.efi</td>
<td class="org-left">bootloader/uefi/amd64/grubx64.efi</td>
</tr>

<tr>
<td class="org-left">ifcpu64.c32</td>
<td class="org-left">bootloader/pxe/i386/ifcpu64.c32</td>
</tr>

<tr>
<td class="org-left">ldlinux.c32</td>
<td class="org-left">bootloader/pxe/i386/ldlinux.c32</td>
</tr>

<tr>
<td class="org-left">libcom32.c32</td>
<td class="org-left">bootloader/pxe/i386/libcom32.c32</td>
</tr>

<tr>
<td class="org-left">libutil.c32</td>
<td class="org-left">bootloader/pxe/i386/libutil.c32</td>
</tr>

<tr>
<td class="org-left">lpxelinux.0</td>
<td class="org-left">bootloader/pxe/i386/lpxelinux.0</td>
</tr>

<tr>
<td class="org-left">pxelinux.0</td>
<td class="org-left">lpxelinux.0</td>
</tr>

<tr>
<td class="org-left">syslinux</td>
<td class="org-left">bootloader/pxe/i386</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>

<div id="outline-container-org5a897bb" class="outline-2">
<h2 id="org5a897bb">Linux kernel block diagrams</h2>
<div class="outline-text-2" id="text-org5a897bb">
<p>
Here are some block diagrams of the Linux OS that I'm starting to draw.
</p>

<p>
<i>Note: a reference example of the FreeBSD kernel is already available in great detail <a href="https://docs.freebsd.org/en/books/design-44bsd/">elsewhere</a>.</i>
</p>
</div>

<div id="outline-container-orge6feec8" class="outline-3">
<h3 id="orge6feec8">User space</h3>
<div class="outline-text-3" id="text-orge6feec8">
<pre class="example" id="orgaa5e5e9">
    User Space        
┌─────────────────┐   
│ Applications    │ User-level programs run here, user apps &amp; tools	 
│ (User Programs) │ like web browsers, text editors, &amp; media players.
├─────────────────┤ 
│ Libraries       │ Precompiled functions &amp; code that apps use.
├─────────────────┤ 
│ Utilities       │ Command-line user utilities like ls &amp; cat. These
│ (Commands)      │ tools are used for scripting and automation.	      
└─────────────────┘
</pre>
</div>
</div>

<div id="outline-container-org2454792" class="outline-3">
<h3 id="org2454792">Kernel space</h3>
<div class="outline-text-3" id="text-org2454792">
<pre class="example" id="orgb7eb408">
    Kernel Space     
┌─────────────────┐
│                 │ The heart of the OS. It manages hardware &amp; offers 
│ Kernel          │ services to apps, like time-sharing CPU bandwidth,
│                 │ managing memory, and talking to devices.	  
├─────────────────┤
│ File System     │ This module manages files &amp; directories, reading
│ Management      │ and writing data, and managing metadata (inodes).
├─────────────────┤
│ Process Control │ This module manages processes (running programs).
│ and Scheduling  │ It ensures fair CPU sharing, based on nice-ing.  
├─────────────────┤
│ Memory Mgmt     │ This module keeps process data isolated &amp; current.
├─────────────────┤
│ Device Drivers  │ Drivers operate devices, usually in standard ways.
├─────────────────┤
│ Networking      │ Manages network communication. Includes protocols 
│ Stack           │ for data transmission, handling sockets, managing 
│                 │ connections, and routing data.		      
├─────────────────┤ 						      
│                 │ The interface between user space and kernel space.
│ System Calls    │ Allows user programs to access kernel services,   
│                 │ like file operations or memory allocation.	      
├─────────────────┤ 						      
│ Security        │ Security mechanisms include access control,       
│ Mechanisms      │ authentication, and authorization features that   
│                 │ protect the system's resources and data.          
├─────────────────┤ 						      
│ Interrupt       │ The interrupt handler catches hardware interrupts 
│ Handling        │ generated by devices. It manages their arrival    
│                 │ prioritization, &amp; handling.			      
├─────────────────┤ 						      
│                 │ Handles strategies to optimize power usage,       
│ Power Mgmt      │ including sleep states, CPU frequency scaling,    
│                 │ and device power management.		      
└─────────────────┘ 						      
</pre>
</div>
</div>

<div id="outline-container-org0ca1abe" class="outline-3">
<h3 id="org0ca1abe">File system management</h3>
<div class="outline-text-3" id="text-org0ca1abe">
<pre class="example" id="org1c60ba2">
     File System Management
┌──────────────────────────────┐
│ File System                  │ Organizes and manages files and directories
│                              │ on storage devices, providing a structured
│                              │ way to store, retrieve, and organize data.
├──────────────────────────────┤
│ Directory Structure          │ Represents the hierarchy of directories and
│                              │ subdirectories, enabling efficient navigation
│                              │ and organization of files.
├──────────────────────────────┤
│ File Operations              │ Encompasses operations such as opening,
│                              │ reading, writing, closing, &amp; deleting files,
│                              │ ensuring data integrity.
├──────────────────────────────┤
│ Metadata Management          │ Manages metadata associated with files,
│ (Inodes, Permissions, etc.)  │ including information like ownership,
│                              │ permissions, timestamps, and file size.
├──────────────────────────────┤
│ File System Journaling and   │ Maintains a journal or log of changes to the
│ Transactional Support        │ file system to ensure consistency and
│                              │ recoverability in case of failures.
├──────────────────────────────┤
│ Disk Space Allocation        │ Handles the allocation and management of
│                              │ physical storage space on storage devices,
│                              │ preventing fragmentation and optimizing use.
├──────────────────────────────┤
│ Caching and Buffers          │ Implements caching mechanisms to improve
│                              │ file read and write performance, using
│                              │ buffers to temporarily store data.
└──────────────────────────────┘
</pre>
</div>
</div>

<div id="outline-container-orgd97aabf" class="outline-3">
<h3 id="orgd97aabf">inodes</h3>
<div class="outline-text-3" id="text-orgd97aabf">
<pre class="example" id="org677bbb3">
       Inode Structure
┌───────────────────────────────┐
│          Inode                │ Inodes are essential data structures in
│                               │ Unix-like file systems (such as ext4).
│                               │ They store metadata about files and
│                               │ directories, as well as pointers to the
│                               │ actual data blocks that contain the
│                               │ file's content.
│ ┌───────────────────────────┐ │
│ │      File Metadata        │ │ Inodes store information like file
│ ├───────────────────────────┤ │ permissions, ownership (user and group),
│ │ File Permissions: Owner,  │ │ creation/modification/access timestamps, 
│ │ Group, Timestamps, Size   │ │ and the size of the file.
│ ├───────────────────────────┤ │
│ │ Block Pointers            │ │ Inodes have pointers to data blocks where
│ │ (Direct, Indirect,        │ │ the actual content of the file is stored. 
│ │ Double Indirect, etc.)    │ │ These pointers can be direct (pointing to
│ │                           │ │ data blocks directly), indirect (pointing
│ │                           │ │ to blocks that contain more pointers), 
│ │                           │ │ double indirect (pointing to blocks that
│ │                           │ │ contain indirect pointers), and so on,
│ │                           │ │ enabling efficient storage of large files.
│ ├───────────────────────────┤ │
│ │ Other Metadata            │ │ Inodes can also store extended attributes
│ │ (Extended Attributes,     │ │ (extra metadata not covered by the
│ │ ACLs, etc.)               │ │ traditional attributes) and Access Control
│ │                           │ │ Lists (ACLs) for advanced perms management.
│ └───────────────────────────┘ │
└───────────────────────────────┘
               │
               │
               │
               ▼
     ┌────────────────────┐
     │    Data Blocks     │ The actual content of a file is stored in data
     │   (File Content)   │ blocks. These blocks are pointed to by the block
     │                    │ pointers in the inode. Data blocks can be of
     │                    │ varying sizes and are organized in a way that
     │                    │ optimizes storage efficiency.
     └────────────────────┘
</pre>
</div>
</div>

<div id="outline-container-orgd9a64e4" class="outline-3">
<h3 id="orgd9a64e4">Process control and scheduling</h3>
<div class="outline-text-3" id="text-orgd9a64e4">
<pre class="example" id="org156f466">
    Process Control
    and Scheduling
┌───────────────────┐
│ Process Control   │
│ and Management    │ Manages processes' creation, termination,
│                   │ synchronization, and communication.
├───────────────────┤
│ Process States    │ Tracks the various states a process can be in,
│                   │ including Running, Ready, Blocked, etc.
├───────────────────┤
│ CPU Scheduling    │ Selects processes for execution, optimizing
│                   │ CPU utilization, response time, and fairness.
├───────────────────┤
│ Context Switching │ Involves saving and restoring the state of
│                   │ processes when switching between them.
├───────────────────┤
│ Inter-Process     │ Facilitates data sharing and communication
│ Communication     │ between processes, using mechanisms like
│                   │ message passing and shared memory.
├───────────────────┤
│ Process Creation  │ Handles the creation of new processes,
│ and Termination   │ including resource allocation and cleanup.
└───────────────────┘
</pre>
</div>
</div>

<div id="outline-container-orgcf232df" class="outline-3">
<h3 id="orgcf232df">Process management</h3>
<div class="outline-text-3" id="text-orgcf232df">
<pre class="example" id="org6412ff3">
      Process Management
          in Linux
┌───────────────────────────┐
│        User Space         │
│ ┌───────────────────────┐ │
│ │ User Programs         │ │
│ │ (Applications,        │ │
│ │ Utilities, etc.)      │ │
│ └───────────────────────┘ │
│             │             │
│             ▼             │
│ ┌───────────────────────┐ │
│ │ System Calls,         │ │
│ │ Libraries, etc.       │ │
│ └───────────────────────┘ │
│              │            │
│              ▼            │
│ ┌───────────────────────┐ │
│ │     Kernel Space      │ │
│ │ ┌───────────────────┐ │ │
│ │ │ Process Scheduler │ │ │ Manages task exec, optimizes CPU utilization.
│ │ ├───────────────────┤ │ │
│ │ │ Scheduler Queue   │ │ │ Holds tasks awaiting CPU allocation.
│ │ ├───────────────────┤ │ │
│ │ │ Time Management   │ │ │ Ensures fair and efficient task scheduling.
│ │ ├───────────────────┤ │ │
│ │ │ CPU Affinity      │ │ │ Binds process to specific CPUs.
│ │ ├───────────────────┤ │ │
│ │ │ Preemption &amp;      │ │ │ Pauses executing process, switches to another,
│ │ │ Context Switching │ │ │ resumes when needed.
│ │ ├───────────────────┤ │ │
│ │ │ Priority Inversion│ │ │ Prevents low-priority task blocking
│ │ │ Avoidance         │ │ │ high-priority task.
│ │ ├───────────────────┤ │ │
│ │ │ Load Balancing    │ │ │ Distributes tasks for resource optimization.
│ │ ├───────────────────┤ │ │
│ │ │ Real-time Sched   │ │ │ Enforces timing constraints, ensures critical
│ │ │ and Policies      │ │ │ task completion.
│ │ └───────────────────┘ │ │
│ └───────────────────────┘ │
└───────────────────────────┘
</pre>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
Copyright (C) 2020-2023 by stormrider; All Rights Reserved
</div>
</body>
</html>